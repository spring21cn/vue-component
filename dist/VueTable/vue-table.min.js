!function(e,t){"use strict";"function"==typeof define&&define.amd?define(["Vue","VueUtil"],t):(e.VueTableColumn=t(e.Vue,e.VueUtil),delete e.VueTableColumn)}(this,function(e,f){"use strict";var p=1,m={default:{order:""},selection:{width:53,minWidth:53,realWidth:53,order:"",className:"vue-table-column--selection"},expand:{width:53,minWidth:53,realWidth:53,order:""},index:{width:53,minWidth:53,realWidth:53,order:""}},g={selection:{property:"selectionColumn",renderHeader:function(e){var t=this.store.states;return e("vue-checkbox",{on:{change:this.toggleAllSelection},attrs:{value:t.isAllSelected,indeterminate:0<t.selection.length&&!t.isAllSelected}},[])},renderCell:function(e,t){var o=t.row,i=t.column,l=t.store,r=t.$index;return e("vue-checkbox",{attrs:{disabled:!!i.selectable&&!i.selectable.call(null,o,r),value:l.isSelected(o)},on:{input:function(){l.commit("rowSelectedChanged",o)}}},[])},sortable:!1,resizable:!1},index:{property:"indexColumn",renderHeader:function(e){return"#"},renderCell:function(e,t){return e("div",null,[t.$index+1])},sortable:!1},expand:{property:"expandColumn",renderHeader:function(e){return""},renderCell:function(e,t,o){var i=t.row;return e("div",{class:"vue-table__expand-icon "+(-1!==t.store.states.expandRows.indexOf(i)?"vue-table__expand-icon--expanded":""),on:{click:function(){return o.handleExpandClick(i)}}},[e("i",{class:"vue-icon vue-icon-arrow-right"},[])])},sortable:!1,resizable:!1,className:"vue-table__expand-column"}},t={name:"VueTableColumn",render:function(e){return e("div",this.$slots.default)},props:{type:{type:String,default:"default"},label:String,printLabel:String,className:[String,Function],labelClassName:String,property:String,prop:String,width:{},minWidth:{},sortable:Boolean,sortMethod:Function,resizable:{type:Boolean,default:!0},context:{},align:String,headerAlign:String,showOverflowTooltip:Boolean,fixed:[Boolean,String],formatter:Function,selectable:Function,visible:{type:Boolean,default:!0},filterable:Boolean,filtered:{type:Boolean,default:!1},filterMethod:Function,filteredValue:Array,filters:Array,complexFilters:Array,aggregate:{type:[String,Function],default:""},aggregateLabel:String,labelColspan:Boolean,colspan:Boolean,rowspan:Boolean},beforeCreate:function(){this.row={},this.column={},this.$index=0},computed:{owner:function(){for(var e=this.$parent;e&&!e.tableId;)e=e.$parent;return e}},created:function(){var r=this,e=r.$parent.columnId++,t=r.columnId=(r.$parent.tableId||r.$parent.columnId+"_")+"column_"+p++,o=(r.$parent,r.owner),i=r.type,l=r.width;f.isDef(l)&&(l=parseInt(l,10),isNaN(l)&&(l=null));var n=r.minWidth;f.isDef(n)&&(n=parseInt(n,10),isNaN(n)&&(n=80));var s,a,u,d=(s=i,a={id:t,columnId:e,label:r.label,printLabel:r.printLabel,className:r.className,labelClassName:r.labelClassName,property:r.prop||r.property,type:i,renderCell:null,renderHeader:r.renderHeader,minWidth:n,width:l,visible:r.visible,context:r.context,align:r.align?"is-"+r.align:null,headerAlign:r.headerAlign?"is-"+r.headerAlign:"is-center",sortable:r.sortable,sortMethod:r.sortMethod,resizable:r.resizable,showOverflowTooltip:r.showOverflowTooltip,formatter:r.formatter,selectable:r.selectable,fixed:""===r.fixed||r.fixed,fixedIndex:-1,filterMethod:r.filterMethod,filterable:r.filterable,complexFilters:r.complexFilters||[],filtered:r.filtered,filterOpened:!1,filteredValue:r.filteredValue||[],filters:r.filters||[],aggregate:r.aggregate,aggregateLabel:r.aggregateLabel,labelColspan:r.labelColspan,rowspan:r.rowspan,getCellClass:function(e,t,o){var i=[],l=r.className;return f.isString(l)?i.push(l):f.isFunction(l)&&i.push(l.call(null,e,t,o)||""),i.join(" ")}},u={},f.merge(u,m[s||"default"],a),u.realWidth=u.width||u.minWidth,u);f.merge(d,g[i]||{});var c=(r.columnConfig=d).renderCell,h=d.renderHeader;if(d.renderHeader=function(){r.$scopedSlots.header?d.renderHeader=function(e,t){return r.$scopedSlots.header(t)}:d.renderHeader=h},"expand"===i)return o.renderExpanded=function(e,t){return r.$scopedSlots.default?r.$scopedSlots.default(t):r.$slots.default},void(d.renderCell=function(e,t){return e("div",{class:"cell"},[c(e,t,this._renderProxy)])});d.renderCell=function(e,t){return r.$scopedSlots.default&&(d.isRenderCell=!0,c=function(){return r.$scopedSlots.default(t)}),c||(c=function(e,t){var o,i,l,r,n=t.row,s=t.column,a=s.property,u=n[a];if(a&&-1!==a.indexOf(".")){o=n,i=(a||"").split("."),l=o,r=null,f.loop(i,function(e,t){return!!l&&(t===i.length-1?(r=l[e],!1):void(l=l[e]))}),u=r}return f.isFunction(s.formatter)?s.formatter(n,s,u):u}),r.showOverflowTooltip?e("div",{class:"cell vue-tooltip"},[c(e,t)]):e("div",{class:"cell"},[c(e,t)])}},destroyed:function(){this.$parent&&this.owner.store.commit("removeColumn",this.columnConfig)},watch:{label:function(e){this.columnConfig&&(this.columnConfig.label=e,this.owner.doLayout())},prop:function(e){this.columnConfig&&(this.columnConfig.property=e)},property:function(e){this.columnConfig&&(this.columnConfig.property=e)},align:function(e){this.columnConfig&&(this.columnConfig.align=e?"is-"+e:null,this.headerAlign||(this.columnConfig.headerAlign=e?"is-"+e:null))},headerAlign:function(e){this.columnConfig&&(this.columnConfig.headerAlign="is-"+(e||this.align))},width:function(e){this.columnConfig&&(this.columnConfig.width=e,this.owner.doLayout())},minWidth:function(e){this.columnConfig&&(this.columnConfig.minWidth=e,this.owner.doLayout())},fixed:function(e){this.columnConfig&&(this.columnConfig.fixed=e,this.owner.doLayout())},sortable:function(e){this.columnConfig&&(this.columnConfig.sortable=e)},visible:function(e){this.columnConfig&&(this.columnConfig.visible=e,this.owner.doLayout())},labelColspan:function(e){this.columnConfig&&(this.columnConfig.labelColspan=e,this.owner.doLayout())},rowspan:function(e){this.columnConfig&&(this.columnConfig.rowspan=e,this.owner.doLayout())}},mounted:function(){var e,t=this.owner;-1==(e=[].indexOf.call(t.$refs.hiddenColumns.children,this.$el))&&(e=[].indexOf.call(t.$refs.hiddenColumns.children,this.$parent.$el)),t.store.commit("insertColumn",this.columnConfig,e)}};e.component(t.name,t)}),function(e,t){"use strict";"function"==typeof define&&define.amd?define(["Vue","VueUtil","VuePopper"],t):(e.VueTable=t(e.Vue,e.VueUtil,e.VuePopper),delete e.VueTable)}(this,function(u,v,e){"use strict";function t(e,t){this.table=e,this.states={_columns:[],columns:[],labelColumns:[],fixedColumns:[],rightFixedColumns:[],_data:null,filteredData:null,data:null,sortingColumns:[],isAllSelected:!1,selection:[],selectable:null,currentRow:null,hoverRow:null,filters:{},expandRows:[],aggregates:[],defaultExpandAll:!1,dataChangedSorting:!1},v.merge(this.states,t)}t.prototype.mutations={setData:function(t,e){var o=this.table,i=t._data!==e;t._data=e,t.filteredData=e,t.data=this.sortData(e||[],t),v.loop(t.data,function(e,t){e.$index=t});var l=t.currentRow;if(-1===t.data.indexOf(l)&&(t.currentRow=null,t.currentRow!==l&&o.$emit("current-change",null,l)),i)this.clearSelection();else{var r=t.selection||[],n=v.filter(r,function(e){return-1===t.data.indexOf(e)});v.loop(n,function(e){r.splice(r.indexOf(e),1)}),n.length&&o.$emit("selection-change",r)}this.updateAllSelected(),t.defaultExpandAll&&(t.expandRows=v.mergeArray([],t.data)),v.isVueComponent(o.$refs.tableBody)&&o.$refs.tableBody.resetDelta(e.length),u.nextTick(function(){o.updateScrollY(),o.resizeZone()})},changeSortCondition:function(e){var t=this;e.data=t.sortData(e.filteredData||e._data||[],e),v.loop(e.data,function(e,t){e.$index=t}),this.table.highlightFirstAfterSort&&e.data.length?this.table.setCurrentRow(e.data[0]):this.table.setCurrentRow(null),!0===t.states.dataChangedSorting?t.states.dataChangedSorting=!1:t.table.$emit("sort-change",t.states.sortingColumns),u.nextTick(function(){t.table.updateScrollY(),t.table.resizeZone()})},filterChange:function(e,t){var r=this,o=t.values,i=t.column,l=t.silent;if(i.property)if(o&&0===Object.keys(o).length)delete e.filters[i.id];else{e.filters[i.id]?e.filters[i.id]=v.merge(e.filters[i.id],o):e.filters[i.id]=o,i.filtered=!1;var n=e.filters[i.id];(n.complexFilters&&0<n.complexFilters.length||n.simpleFilters&&0<n.simpleFilters.length)&&(i.filtered=!0)}var s=e._data,a=e.filters;v.ownPropertyLoop(a,function(e){var o=a[e],i=r.getColumnById(e);if(o&&i&&(o.complexFilters&&0<o.complexFilters.length&&o.complexFilters.forEach(function(t){s=v.filter(s,function(e){return function(e,t){switch(e.operations){case"=":return t===e.conditions;case">":return t>e.conditions;case"<":return t<e.conditions;case"<=":return t<=e.conditions;case">=":return t>=e.conditions;case"<>":return t!==e.conditions;case"%":return-1!==t.indexOf(e.conditions)}}.call(null,t,e[i.property])})}),o.simpleFilters&&0<o.simpleFilters.length))if(i.filterMethod)s=v.filter(s,function(t){return o.some(function(e){return i.filterMethod.call(null,e,t)})});else{var l=i.property;s=v.filter(s,function(t){return o.simpleFilters.some(function(e){return t[l]===e})})}}),e.filteredData=s,e.data=r.sortData(s,e),v.loop(e.data,function(e,t){e.$index=t}),this.table.highlightFirstAfterFilter&&s.length?this.table.setCurrentRow(s[0]):this.table.setCurrentRow(null),l||r.table.$emit("filter-change",a),r.table.$refs.tableBody.resetDelta(s.length),u.nextTick(function(){r.table.updateScrollY(),r.table.resizeZone()})},insertColumn:function(e,t,o){var i=e._columns;v.isDef(o)?i.splice(o,0,t):i.push(t),"selection"===t.type&&(e.selectable=t.selectable),this.updateColumns()},removeColumn:function(e,t){var o=e._columns;o.length&&o.splice(o.indexOf(t),1),this.updateColumns()},reorderColumn:function(e,t,o){if(t!==o){var i=e._columns;o<t?(i.splice(o,0,i[t]),i.splice(t+1,1)):(i.splice(o+1,0,i[t]),i.splice(t,1)),this.updateColumns()}},setHoverRow:function(e,t){e.hoverRow=t},setCurrentRow:function(e,t){var o=e.currentRow;o!==(e.currentRow=t)&&this.table.$emit("current-change",t,o)},rowSelectedChanged:function(e,t){var o=this.toggleRowSelection(t),i=e.selection;if(o){var l=this.table;l.$emit("selection-change",i),l.$emit("select",i,t)}this.updateAllSelected()},toggleRowExpanded:function(e,t,o){var i=e.expandRows;if(v.isDef(o)){var l=i.indexOf(t);o?-1===l&&i.push(t):-1!==l&&i.splice(l,1)}else{-1===(l=i.indexOf(t))?i.push(t):i.splice(l,1)}var r=this.table;u.nextTick(function(){r.$emit("expand",t,-1!==i.indexOf(t))})},toggleAllSelection:function(o){var e=o.data||[],i=!o.isAllSelected,t=this.states.selection,l=!1,r=this;v.loop(e,function(e,t){o.selectable?o.selectable.call(null,e,t)&&r.toggleRowSelection(e,i)&&(l=!0):r.toggleRowSelection(e,i)&&(l=!0)});var n=this.table;l&&n.$emit("selection-change",t),n.$emit("select-all",t),o.isAllSelected=i}},t.prototype.getAggregate=function(e,c){var h={sum:u.t("vue.table.sumText"),count:u.t("vue.table.countText"),average:u.t("vue.table.averageText"),min:u.t("vue.table.minText"),max:u.t("vue.table.maxText")},f=this.states.aggregates=[];0!==c.length&&v.loop(e,function(i){var e="",t={max:"",min:"",sum:"",average:"",label:""};if(t.property=i.property,"function"==typeof i.aggregate)return t.label=i.aggregate.call(null,i,c),void f.push(t);var o=i.aggregate.toLowerCase(),l=h[o];if(v.isDef(i.aggregateLabel)&&(l=i.aggregateLabel),v.isDef(l)){var r=null,n=null,s=null,a=0,u=0;t.count=c.length,v.loop(c,function(e){var t=Number(e[i.property]);if(v.isNumber(t)){var o=(""+t).split(".")[1];o&&o.length>a&&(a=o.length),v.isDef(r)?r<t&&(r=t):r=t,v.isDef(n)?t<n&&(n=t):n=t,v.isDef(s)?s+=t:s=t,u++}}),0<u&&(t.max=r,t.min=n,t.sum=s,t.average=s/u);var d=t[o];e=v.isNumber(d)?("count"===o&&(a=0),d=v.formatNumber(d,a),l?l+": "+d:d):l,t.label=e}f.push(t)})},t.prototype.updateLabelColumns=function(){for(var e=this.states,t=[],o=[],i=e._columns,l=i.length;l--;){var r=i[l];r.labelColspan?o.push(r):(0<o.length&&(o.reverse(),r.colColumns=v.mergeArray([],o),o=[]),t.push(r))}t.reverse(),e.labelColumns=t},t.prototype.updateColumns=function(){var t=this.states,o=[];t.fixedColumns=[],t.rightFixedColumns=[],v.loop(v.mergeArray([],t._columns),function(e){e.visible&&(o.push(e),!0!==e.fixed&&"left"!==e.fixed||t.fixedColumns.push(e),"right"===e.fixed&&t.rightFixedColumns.push(e))}),t.fixedColumns.sort(function(e,t){return e.fixedIndex-t.fixedIndex}),t.rightFixedColumns.sort(function(e,t){return t.fixedIndex-e.fixedIndex}),0<t.fixedColumns.length&&o[0]&&"selection"===o[0].type&&!o[0].fixed&&(o[0].fixed=!0,t.fixedColumns.unshift(o[0])),t.columns=v.mergeArray([],t.fixedColumns,v.filter(o,function(e){return!e.fixed}),t.rightFixedColumns),this.updateLabelColumns()},t.prototype.rowspanData=function(e){var t=this.states.columns;v.loop(t,function(i){if(i.rowspan){var o=null,l=null;i.rowspanAry=[],i.rowspanStartAry=[],v.loop(e,function(e,t){o=e[i.property],0<t&&o===l&&i.rowspanAry.push(t),l=o});var r=null;v.loop(i.rowspanAry,function(e,t){var o=e-1;-1===i.rowspanAry.indexOf(o)?((r={}).start=o,r.spanNum=2,i.rowspanStartAry.push(r)):r.spanNum++})}})},t.prototype.sortData=function(e,t){var o,a,i=t.sortingColumns;if(0!==i.length){o=e,a=i,e=v.mergeArray([],o).sort(function(i,l){var r=0,n=a[r];r++;var s=function(){var e=i[n.property],t=l[n.property];null==e&&(e=""),null==t&&(t="");var o=1;return"descending"===n.order&&(o=-1),e!==t?v.isFunction(n.sortMethod)?n.sortMethod(i[n.property],l[n.property],i,l)?o:-o:t<e?o:-o:r!==a.length?(n=a[r],r++,s()):void 0};return s()})}return e},t.prototype.getColumnById=function(e){for(var t=null,o=this.states._columns,i=o.length;i--;){var l=o[i];if(l.id===e){t=l;break}}return t},t.prototype.isSelected=function(e){return-1!==(this.states.selection||[]).indexOf(e)},t.prototype.clearSelection=function(){var e=this.states;e.isAllSelected=!1;var t=e.selection;e.selection=[],0<t.length&&this.table.$emit("selection-change",e.selection)},t.prototype.toggleRowSelection=function(e,t){var o=!1,i=this.states.selection,l=i.indexOf(e);return v.isDef(t)?t&&-1===l?(i.push(e),o=!0):t||-1===l||(i.splice(l,1),o=!0):o=(-1===l?i.push(e):i.splice(l,1),!0),o},t.prototype.updateAllSelected=function(){var e=this.states,t=e.selection,o=e.selectable,i=e.data;if(i&&0!==i.length){for(var l=function(e){return-1!==t.indexOf(e)},r=!0,n=0,s=i.length;s--;){var a=i[s];if(o){if(o.call(null,a,s)){if(!l(a)){r=!1;break}n++}}else{if(!l(a)){r=!1;break}n++}}0===n&&(r=!1),e.isAllSelected=r}else e.isAllSelected=!1},t.prototype.commit=function(e){var t=this.mutations,o=[];if(v.loop(arguments,function(e,t){0!==t&&o.push(e)}),!t[e])throw"Action not found: "+e;t[e].apply(this,v.mergeArray([this.states],o))};function o(e){this.table=null,this.store=null,this.fit=!0,this.showHeader=!0,this.height=null,this.scrollX=!1,this.scrollY=!1,this.bodyWidth=null,this.fixedWidth=null,this.rightFixedWidth=null,this.headerHeight=44,this.viewportHeight=null,this.bodyHeight=null,this.fixedBodyHeight=null,this.gutterWidth=v.scrollBarWidth(),v.merge(this,e)}o.prototype.updateScrollY=function(){var e=this.table.$refs;if(e.tableBody&&e.bodyWrapper){this.scrollY=!1;var t=e.tableBody.$refs.tbody;if(v.isNumber(this.height)&&v.isElement(t)){var o=e.bodyWrapper;t.offsetHeight>o.offsetHeight&&(this.scrollY=!0)}}},o.prototype.setHeight=function(e){var t=this.table.$el;t&&(v.isString(e)&&/^\d+$/.test(e)&&(e=Number(e)),v.isNumber(e)?(this.height=e,t.style.height=e+"px"):v.isString(e)&&""===e&&(t.style.height=""),this.updateHeight())},o.prototype.updateHeight=function(){var e=0,t=this.table.$el;if(v.isElement(t)&&(e=t.clientHeight),this.headerHeight=0,this.showHeader){var o=this.table.$refs.headerWrapper;v.isDef(o)&&(this.headerHeight=o.offsetHeight);var i=this.headerHeight,l=0,r=this.table.$refs.footerWrapper;this.table.showFooter&&r&&(l=r.clientHeight);var n=e-(i+l);v.isNumber(this.height)&&(this.bodyHeight=n),this.fixedBodyHeight=this.scrollX?n-this.gutterWidth:n}else v.isNumber(this.height)&&(this.bodyHeight=e),this.fixedBodyHeight=this.scrollX?e-this.gutterWidth:e;this.viewportHeight=this.scrollX?e-this.gutterWidth:e,this.table.showFooter&&(this.viewportHeight=e)},o.prototype.update=function(){var e=this.fit,t=this.store.states.columns,o=0,i=this.table.$el;v.isElement(i)&&(o=i.clientWidth);var l=0,r=[],n=0;v.loop(t,function(e){v.isNumber(e.width)||(r.push(e),n+=e.minWidth||80),l+=e.width||e.minWidth||80,e.realWidth=e.width||e.realWidth}),this.scrollX=o<l,this.bodyWidth=l;var s=r.length;if(0<s&&e){if(l<=o-this.gutterWidth){this.scrollX=!1;for(var a=o-this.gutterWidth-l,u=0,d=a/n;s--&&0!==s;){var c=r[s],h=Math.floor((c.minWidth||80)*d);u+=h,c.realWidth=(c.minWidth||80)+h}r[0].realWidth=(r[0].minWidth||80)+a-u}else this.scrollX=!0,v.loop(r,function(e){e.realWidth=e.minWidth||80});this.bodyWidth=Math.max(l,o)}var f=this.store.states.fixedColumns,p=0;v.loop(f,function(e){p+=e.realWidth||80}),this.fixedWidth=p;var m=this.store.states.rightFixedColumns,g=0;v.loop(m,function(e){g+=e.realWidth||80}),this.rightFixedWidth=g};var i={props:{fixed:String},render:function(n){var s=this;v.isDef(s.delta)||this.createDelta();var e=s.delta,t=s.store.states.columns,o=s.store.states.data;if(s.fixed){if(!("left"===s.fixed&&0<s.store.states.fixedColumns.length||"right"===s.fixed&&0<s.store.states.rightFixedColumns.length))return null;e=s.tableBody.delta,s.$nextTick(s.doResetCurrentRow)}else s.scrollFilter(o,e);return 0===e.data.length?null:(s.store.rowspanData(e.data),n("table",{class:"vue-table__body",attrs:{cellspacing:"0",cellpadding:"0",border:"0"},style:{"margin-top":e.marginTop+"px","margin-bottom":e.marginBottom+"px"}},[n("colgroup",null,[s._l(t,function(e,t){return n("col",{key:t,attrs:{name:e.id,width:e.realWidth||e.width||80}},[])}),!s.fixed&&(s.layout.scrollX||s.layout.scrollY)&&s.layout.gutterWidth?n("col",{attrs:{name:"gutter",width:0}},[]):""]),n("tbody",{ref:"tbody"},[v.mergeArray(s._l(e.data,function(i,l){var r=i.$index;return[n("tr",{style:s.rowStyle?s.getRowStyle(i,r):null,key:r,ref:"trow"+r,on:{dblclick:function(e){return s.handleDoubleClick(e,i)},contextmenu:function(e){return s.handleContextMenu(e,i)},mouseenter:function(e){return s.handleMouseEnter(i)},mouseleave:function(e){return s.handleMouseLeave()}},class:["vue-table__row",s.getRowClass(i,r)]},[s._l(t,function(t,e){if(t.rowspan&&-1!==t.rowspanAry.indexOf(l))return null;var o=null;return t.rowspan&&v.loop(t.rowspanStartAry,function(e){e.start===l&&(o=e.spanNum)}),n("td",{key:e,attrs:{rowspan:o},class:["vue-table__cell",r%2==1?"grey":"",t.align,t.getCellClass(r,e,i)||"",s.$parent.isCellHidden(e,s.fixed)?"is-hidden":"",t.isRenderCell?"template-column-cell":""],on:{click:function(e){return s.handleClick(e,i,t)},mouseenter:function(e){return s.handleCellMouseEnter(e,i,t)},mouseleave:function(e){return s.handleCellMouseLeave(e,i,t)}}},[t.renderCell.call(s._renderProxy,n,{row:i,column:t,$index:r,store:s.store,_self:s.$parent.$vnode.context}),t.showOverflowTooltip?n("vue-tooltip",{attrs:{effect:s.$parent.tooltipEffect,placement:"top",content:s.tooltipContent,append:s.$parent.$el},ref:"tooltip"+t.property+r},[]):null])}),!s.fixed&&(s.layout.scrollX||s.layout.scrollY)&&s.layout.gutterWidth?n("td",{class:"vue-table__cell gutter"},[]):""]),-1!==s.store.states.expandRows.indexOf(i)?n("tr",{class:["vue-table__row","vue-table__expanded-row"]},[n("td",{attrs:{colspan:t.length},class:["vue-table__cell","vue-table__expanded-cell",s.getExpandClass(i,r)]},[s.$parent.renderExpanded?s.$parent.renderExpanded(n,{row:i,$index:r,store:s.store}):""])]):null]}),s._self.$parent.$slots.append)])]))},watch:{"store.states.hoverRow":function(e){this.doResetHoverRow(e)},"store.states.currentRow":function(e){this.doResetCurrentRow(e)}},computed:{store:function(){return this.$parent.store},layout:function(){return this.$parent.layout},rowClassName:function(){return this.$parent.rowClassName},rowStyle:function(){return this.$parent.rowStyle},expandClassName:function(){return this.$parent.expandClassName},highlightCurrent:function(){return this.$parent.highlightCurrentRow},highlightHover:function(){return this.$parent.highlightHoverRow},tableBody:function(){return this.$parent.$refs.tableBody},fixedTableBody:function(){return this.$parent.$refs.fixedTableBody},rightFixedTableBody:function(){return this.$parent.$refs.rightFixedTableBody}},data:function(){return{tooltipContent:""}},methods:{createDelta:function(){if(!this.fixed){var e=this.delta=Object.create(null);e.start=0,e.end=0,e.total=0,e.keeps=0,e.marginTop=0,e.marginBottom=0,e.size=40,e.remain=0,e.data=[];var t=this.$parent;t.height&&t.lazyload&&(e.remain=Math.floor(1*t.height/e.size)+10,e.end=e.remain,e.keeps=e.remain)}},resetDelta:function(e){if(!this.fixed){var t=this.delta;0!==t.keeps&&(t.start=0,e<=t.remain?t.end=e:(t.end=t.remain,t.keeps=t.remain))}},scrollFilter:function(e,t){if(t.data=[],0===t.keeps||e.length<=t.keeps)t.marginTop=0,t.marginBottom=0,t.data=e;else{t.total=e.length,t.marginTop=t.size*t.start,t.marginBottom=t.size*(t.total-t.keeps-t.start);for(var o=t.start,i=t.end;o<i;o++)t.data.push(e[o])}},updateZone:function(e){if(!this.fixed){var t=this.delta;if(0!==t.keeps&&(t.size=40,v.isElement(this.$refs.tbody)&&(t.size=this.$refs.tbody.firstElementChild.offsetHeight),t.remain=Math.floor(1*this.$parent.height/t.size)+11,t.keeps=t.remain,!(t.total<=t.keeps))){var o=Math.floor(e/t.size)-6;o<0&&(o=0);var i=o,l=o+t.keeps;o+t.keeps>=t.total&&(l=t.total,i=t.total-t.keeps),t.end=l,t.start=i,this.forceUpdate(),this.$nextTick(this.doResetCurrentRow)}}},forceUpdate:v.throttle(function(){this.tableBody.$forceUpdate(),this.fixedTableBody.$forceUpdate(),this.rightFixedTableBody.$forceUpdate()}),doResetCurrentRow:v.throttle(function(e){this.tableBody.resetCurrentRow(e),this.fixedTableBody.resetCurrentRow(e),this.rightFixedTableBody.resetCurrentRow(e)}),doResetHoverRow:function(e){this.tableBody.resetHoverRow(e),this.fixedTableBody.resetHoverRow(e),this.rightFixedTableBody.resetHoverRow(e)},resetCurrentRow:function(e){if(this.highlightCurrent){var t=this.currentRow;if(t&&t.classList.remove("current-row"),v.isDef(e)||(e=this.store.states.currentRow),v.isDef(e)){var o=this.$refs["trow"+e.$index];o&&o.classList.add("current-row"),this.currentRow=o}}},resetHoverRow:function(e){if(this.highlightHover){var t=this.hoverRow;if(t&&t.classList.remove("hover-row"),v.isDef(e)){var o=this.$refs["trow"+e.$index];o&&o.classList.add("hover-row"),this.hoverRow=o}}},getCell:function(e){for(var t=e.target;t&&"HTML"!==t.tagName.toUpperCase();){if("TD"===t.tagName.toUpperCase())return t;t=t.parentNode}return null},getRowStyle:function(e,t){var o=this.rowStyle;return v.isFunction(o)?o.call(null,e,t):o},getRowClass:function(e,t){var o=[],i=this.rowClassName;return v.isString(i)?o.push(i):v.isFunction(i)&&o.push(i.call(null,e,t)||""),o.join(" ")},getExpandClass:function(e,t){var o=[],i=this.expandClassName;return v.isString(i)?o.push(i):v.isFunction(i)&&o.push(i.call(null,e,t)||""),o.join(" ")},handleCellMouseEnter:function(e,t,o){var i=this.getCell(e);if(i){var l=this.$parent,r=l.hoverState={cell:i,column:o,row:t};l.$emit("cell-mouse-enter",r.row,r.column,r.cell,e);var n=e.target.querySelector(".cell");if(o.showOverflowTooltip&&n.scrollWidth>n.offsetWidth){var s=this.$refs["tooltip"+o.property+this.store.states.data.indexOf(t)];this.tooltipContent=i.innerText,s.referenceElm=i,s.setExpectedState(!0),s.handleShowPopper()}}},handleCellMouseLeave:function(e,t,o){if(this.getCell(e)){var i=this.$parent,l=i.hoverState;i.$emit("cell-mouse-leave",l.row,l.column,l.cell,e);var r=e.target.querySelector(".cell");if(o.showOverflowTooltip&&r.scrollWidth>r.offsetWidth){var n=this.$refs["tooltip"+o.property+this.store.states.data.indexOf(t)];n.setExpectedState(!1),n.handleClosePopper()}}},handleMouseEnter:function(e){this.store.commit("setHoverRow",e)},handleMouseLeave:function(){this.store.commit("setHoverRow",null)},handleContextMenu:function(e,t){this.$parent.$emit("row-contextmenu",t,e)},handleDoubleClick:function(e,t){this.$parent.$emit("row-dblclick",t,e)},handleClick:function(e,t,o){var i=this.$parent,l=this.getCell(e);l&&i.$emit("cell-click",t,o,l,e),this.store.commit("setCurrentRow",t),i.$emit("row-click",t,e,o)},handleExpandClick:function(e){this.store.commit("toggleRowExpanded",e)}}},r={template:'<transition @after-leave="destroyPopper">     <div class="vue-table-filter" v-show="showPopper" v-clickoutside="handleOutsideClick">       <div class="vue-table-filter__content">         <vue-checkbox-group v-model="filteredValue">           <vue-list scrollbar :height="150" ref="list" class="vue-table-filter__list">             <vue-list-item v-for="(filter, index) in complexFilters" :key="\'complexFilters\'+index" class="vue-table-filter__list-item">               <template>              <label class="vue-checkbox table-complexfilter">                <span class="vue-checkbox__input is-checked">                  <span @mousedown.left.stop="removeComplexFilter(filter)" class="vue-checkbox__inner"></span>                </span>                <span class="vue-checkbox__label">{{filter.operations + \' \' + filter.conditions}}</span>              </label>               </template>            </vue-list-item>            <vue-list-item v-if="column.filterable" v-for="(filter, index) in filters" :key="index" class="vue-table-filter__list-item">               <vue-checkbox :label="filter.value">{{filter.text}}</vue-checkbox>             </vue-list-item>           </vue-list>         </vue-checkbox-group>       </div>       <div class="vue-table-filter__bottom">         <vue-button @click="handleConfirm" type="text" :disabled="filteredValue.length === 0">{{$t(\'vue.table.confirmFilter\')}}</vue-button>         <vue-button type="text" @click="handleReset">{{$t(\'vue.table.resetFilter\')}}</vue-button>       </div>     </div>   </transition>',name:"VueTableFilterPanel",mixins:[e],directives:{Clickoutside:v.component.clickoutside()},props:{placement:{type:String,default:"bottom"}},methods:{handleOutsideClick:function(){this.showPopper=!1},handleConfirm:function(){this.confirmFilter(this.filteredValue,this.column.complexFilters),this.handleOutsideClick()},handleReset:function(){this.filteredValue=[],this.column.complexFilters=[],this.handleConfirm()},confirmFilter:function(e,t){this.table.store.commit("filterChange",{column:this.column,values:{simpleFilters:e,complexFilters:t}})},removeComplexFilter:function(e){var t=this.column.complexFilters.indexOf(e);-1<t&&(this.column.complexFilters.splice(t,1),this.column.filterable||0!=this.column.complexFilters.length||this.handleOutsideClick()),this.confirmFilter(this.filteredValue,this.column.complexFilters)}},computed:{filters:function(){if(this.column&&0<this.column.filters.length)return this.column.filters;var o=[],i=this.column;return v.loop(this.table.store.states._data,function(e){var t={};t.value=e[i.property],t.text=e[i.property],-1===o.map(function(e){return e.value}).indexOf(t.value)&&o.push(t)}),o},complexFilters:function(){return this.column&&this.column.complexFilters||[]},filteredValue:{get:function(){return this.column&&this.column.filteredValue||[]},set:function(e){this.column&&(this.column.filteredValue=e)}}},mounted:function(){var t=this;t.popperElm=t.$el,t.referenceElm=t.cell,t.dropdown=Object.create(null),t.dropdown.dropdowns=[],t.dropdown.open=function(e){e&&this.dropdowns.push(e)},t.dropdown.close=function(e){-1!==this.dropdowns.indexOf(e)&&this.dropdowns.splice(e,1)},t.$watch("showPopper",function(e){t.column&&(t.column.filterOpened=e),e?(t.dropdown.open(t),t.$nextTick(t.$refs.list.updateZone)):t.dropdown.close(t)})}},l={render:function(i){if(!this.$parent.showHeader||"left"===this.fixed&&0===this.store.states.fixedColumns.length||"right"===this.fixed&&0===this.store.states.rightFixedColumns.length)return null;var l=this,e=l.store.states.columns,t=l.convertToRows(e);return i("table",{class:"vue-table__header",attrs:{cellspacing:"0",cellpadding:"0",border:"0"}},[i("colgroup",null,[l._l(e,function(e,t){return i("col",{key:t,attrs:{name:e.id,width:e.realWidth||e.width||80}},[])}),!l.fixed&&(l.layout.scrollX||l.layout.scrollY)&&l.layout.gutterWidth?i("col",{attrs:{name:"gutter",width:l.layout.gutterWidth}},[]):""]),i("thead",null,[l._l(t,function(e,o){return i("tr",{class:["vue-table__row"],key:o},[l._l(e,function(t,e){return t.labelColspan?null:i("th",{key:e,attrs:{colspan:t.labelColspanNum},on:{mousemove:function(e){return l.handleMouseMove(e,t)},mouseout:l.handleMouseOut,mousedown:function(e){return l.handleMouseDown(e,t)},touchstart:function(e){return l.handleMouseDown(e,t)},click:function(e){return l.handleHeaderClick(e,t)}},class:["vue-table__column",t.order,t.headerAlign,0===o&&l.$parent.isCellHidden(e,l.fixed)?"is-hidden":"","is-leaf",t.labelClassName,t.renderHeader?"template-column-header":""]},[i("div",{class:["cell",t.filtered||t.order?"highlight":""],style:{width:t.renderHeader?"100%":"",padding:t.renderHeader?0:""}},[t.renderHeader?t.renderHeader.call(l._renderProxy,i,{column:t,$index:e,store:l.store,_self:l.$vnode.context}):i("span",{class:["vue-table_column-label","vue-table_column-label-"+t.property],domProps:{innerHTML:t.label}}),t.sortable&&!t.renderHeader?i("span",{class:"vue-table__sort-wrapper",on:{click:function(e){return l.handleSortClick(e,t)}}},[i("i",{class:["is-sort","descending"===t.order?"vue-icon-sort-desc":"vue-icon-sort-asc"]},[])]):"",(t.filterable||t.complexFilters&&0<t.complexFilters.length)&&!t.renderHeader?i("span",{class:"vue-table__column-filter-trigger",on:{click:function(e){return l.handleFilterClick(e,t)}}},[i("i",{class:["vue-icon-filter",t.filtered?"is-filtered":""]},[])]):""])])}),!l.fixed&&(l.layout.scrollX||l.layout.scrollY)&&l.layout.gutterWidth?i("th",{class:"vue-table__column gutter"},[]):""])})])])},props:{fixed:String},computed:{store:function(){return this.$parent.store},layout:function(){return this.$parent.layout},border:function(){return this.$parent.border},defaultSort:function(){return this.$parent.defaultSort}},created:function(){this.filterPanels={}},mounted:function(){this.draggingColumn=null,this.dragging=!1,this.dragState={},this.setDefaultSortColumn()},beforeDestroy:function(){var t=this.filterPanels;v.ownPropertyLoop(t,function(e){v.isVueComponent(t[e])&&t[e].$destroy()})},methods:{setDefaultSortColumn:function(){if(!this.fixed){var e=this,o=e.store.states.sortingColumns;v.loop(e.defaultSort,function(t){v.loop(e.store.states.columns,function(e){e.property===t.prop&&(e.order=t.order,o.push(e))})})}},convertToRows:function(e){for(var t=[[]],o=1,i=e.length;i--;){var l=e[i];l.labelColspanNum=1,l.labelColspan?o++:(l.labelColspanNum=o,o=1),t[0].push(l)}return t[0].reverse(),t},toggleAllSelection:function(){this.store.commit("toggleAllSelection")},handleFilterClick:function(e,t){e.stopPropagation();var o=e.target;"SPAN"==o.tagName&&(o=o.querySelector("i"));var i=o.parentNode,l=this.filterPanels[t.id];l&&t.filterOpened?l.showPopper=!1:(l?l.referenceElm!==i&&(l.referenceElm=i):(u.i18n&&(r.i18n=u.i18n),l=new u(r),(this.filterPanels[t.id]=l).table=this.$parent,l.cell=i,l.column=t,l.$mount(document.createElement("div"))),this.$nextTick(function(){l.showPopper=!0}))},handleHeaderClick:function(e,t){this.$parent.$emit("header-click",t,e)},handleMouseDown:function(r,n){var s=this;if(r.touches&&s.handleMouseMove(r,n),s.draggingColumn&&s.border){s.dragging=!0,s.$parent.resizeProxyVisible=!0;var e=s.$parent.$el.getBoundingClientRect().left,a=r.currentTarget,t=a.getBoundingClientRect(),i=t.left-e+30;a.classList.add("noclick"),s.dragState={startMouseLeft:r.clientX||r.touches[0].clientX,startLeft:t.right-e,startColumnLeft:t.left-e,tableLeft:e};var u=s.$parent.$refs.resizeProxy;u.style.left=s.dragState.startLeft+"px",document.onselectstart=function(){return!1},document.ondragstart=function(){return!1};var d=function(e){var t=(e.clientX||e.touches[0].clientX)-s.dragState.startMouseLeft,o=s.dragState.startLeft+t;u.style.left=Math.max(i,o)+"px"},c=function(){if(s.dragging){var e=parseInt(u.style.left,10),t=s.dragState.startLeft,o=s.dragState.startColumnLeft,i=1;v.isArray(n.colColumns)&&(i+=n.colColumns.length);var l=parseInt((e-o)/i);n.width=n.realWidth=l,v.loop(n.colColumns,function(e){e.width=e.realWidth=l}),s.$parent.$emit("header-dragend",e-o,t-o,n,r),document.body.style.cursor="",s.dragging=!1,s.draggingColumn=null,s.dragState={},s.$parent.resizeProxyVisible=!1,s.$parent.doLayout()}v.removeTouchMove(document,d),v.removeTouchEnd(document,c),document.onselectstart=null,document.ondragstart=null,s.$nextTick(function(){a.classList.remove("noclick")})};v.addTouchMove(document,d),v.addTouchEnd(document,c)}},handleMouseMove:function(e,t){for(var o=e.target;o&&!v.hasClass(o,"vue-table__column");)o=o.parentNode;if(t&&t.resizable&&!this.dragging&&this.border){var i=o.getBoundingClientRect(),l=document.body.style;12<i.width&&i.right-(e.pageX||e.touches[0].pageX)<8?(l.cursor="col-resize",this.draggingColumn=t):this.dragging||(l.cursor="",this.draggingColumn=null)}},handleMouseOut:function(){document.body.style.cursor=""},toggleOrder:function(e){return e?"ascending"===e?"descending":null:"ascending"},handleSortClick:function(e,t){e.stopPropagation();for(var o=e.target;o&&!v.hasClass(o,"vue-table__column");)o=o.parentNode;if(o&&v.hasClass(o,"vue-table__column")&&o.classList.contains("noclick"))o.classList.remove("noclick");else{var i=this.store.states.sortingColumns;t.order=this.toggleOrder(t.order);var l=i.indexOf(t);-1===l?i.push(t):null===t.order&&i.splice(l,1),this.store.commit("changeSortCondition")}}}},n={render:function(o){if(!this.$parent.showFooter||"left"===this.fixed&&0===this.store.states.fixedColumns.length||"right"===this.fixed&&0===this.store.states.rightFixedColumns.length)return null;var i=this,l=i.fixed?i.$parent.$refs.tableFooter.aggregates:i.aggregates,e=i.store.states.columns;return o("table",{class:"vue-table__footer",attrs:{cellspacing:"0",cellpadding:"0",border:"0"}},[o("colgroup",null,[i._l(e,function(e,t){return o("col",{key:t,attrs:{name:e.id,width:e.realWidth||e.width||80}},[])}),!i.fixed&&(i.layout.scrollX||i.layout.scrollY)&&i.layout.gutterWidth?o("col",{attrs:{name:"gutter",width:i.layout.gutterWidth}},[]):""]),o("tfoot",null,[o("tr",{class:["vue-table__row"]},[i._l(e,function(e,t){return o("th",{key:t,attrs:{colspan:e.colSpan,rowspan:e.rowSpan},class:["vue-table__column",e.align,e.className||"",i.$parent.isCellHidden(t,i.fixed)?"is-hidden":"","is-leaf",e.labelClassName]},[o("div",{class:["cell",e.labelClassName],domProps:{innerHTML:[l[t]?l[t].label:""]}})])}),!i.fixed&&(i.layout.scrollX||i.layout.scrollY)&&i.layout.gutterWidth?o("th",{class:"vue-table__column gutter"},[]):""])])])},props:{fixed:String},data:function(){return{aggregates:[]}},computed:{store:function(){return this.$parent.store},layout:function(){return this.$parent.layout}},watch:{"$parent.emptyLabel":function(){this.$parent.showFooter&&!this.fixed&&(this.store.getAggregate(this.store.states.columns,this.store.states.data),this.aggregates=this.store.states.aggregates)}}},s={template:'<vue-dialog :size="size" v-model="dialogVisible" custom-class="vue-table-context-menu" :title="$t(\'vue.table.contextMenu\')"       show-close @close="closeHandle">       <vue-tabs>         <vue-tab-pane :label="$t(\'vue.table.pin\')">           <vue-form label-width="100px">             <vue-form-item :label="$t(\'vue.table.leftPin\')">               <vue-select clearable v-model="pinForm.leftPin" multiple @change="leftPin" @remove-tag="noPin" value-key="id">                 <vue-option v-for="(column, index) in labelColumns" :key="index" :label="column.label?column.label:(column.type==\'index\'?\'#\':\' \')" :value="column"></vue-option>               </vue-select>             </vue-form-item>             <vue-form-item :label="$t(\'vue.table.rightPin\')">               <vue-select clearable v-model="pinForm.rightPin" multiple @change="rightPin" @remove-tag="noPin" value-key="id">                 <vue-option v-for="(column, index) in labelColumns" :key="index" :label="column.label?column.label:(column.type==\'index\'?\'#\':\' \')" :value="column"></vue-option>               </vue-select>             </vue-form-item>           </vue-form>         </vue-tab-pane>         <vue-tab-pane :label="$t(\'vue.table.sort\')">           <vue-list scrollbar :height="150" :default-selected="false">             <vue-list-item v-for="(column, index) in labelColumns" v-if="column.type != \'index\'" :key="index">               <vue-button type="text" style="padding-left:15px" @click="removeSortColumn(column, true)">{{column.label?column.label:(column.type=="index"?"#":"&nbsp;")}}</vue-button>               <div style="float:right;">                 <vue-button style="padding:10px 0 0 0;" :style="{color: column.order === \'ascending\' ? \'#eb9e05\' : \'rgb(151, 168, 190)\'}"                   icon="vue-icon-caret-top" type="text" @click="sortColumn(column)"></vue-button>                 <vue-button style="padding:10px 15px 0 0;" :style="{color: column.order === \'descending\' ? \'#eb9e05\' : \'rgb(151, 168, 190)\'}"                   icon="vue-icon-caret-bottom" type="text" @click="sortColumn(column, true)"></vue-button>               </div>               <vue-divider v-if="index!==labelColumns.length-1"></vue-divider>             </vue-list-item>           </vue-list>           <vue-form label-width="70px">             <vue-form-item :label="$t(\'vue.table.sortBy\')">               <vue-tag hit style="margin:5px 5px 0 0;" v-for="(column, index) in sortList" :key="index" closable                 type="info" @close="removeSortColumn(column)">{{column.label?column.label:(column.type=="index"?"#":"&nbsp;")}}<i style="padding:5px 0 0 5px;" :class="[{\'vue-icon-caret-top\': column.order === \'ascending\'}, {\'vue-icon-caret-bottom\': column.order === \'descending\'}]"></i></vue-tag>             </vue-form-item>           </vue-form>         </vue-tab-pane>         <vue-tab-pane :label="$t(\'vue.table.filter\')">           <vue-form label-width="100px" :model="filterForm">             <vue-form-item :label="$t(\'vue.table.column\')">               <vue-select v-model="filterForm.filterColumn">                 <vue-option v-for="(column, index) in labelColumns" v-if="column.type != \'index\'" :key="index" :label="column.label?column.label:(column.type==\'index\'?\'#\':\' \')" :value="column"></vue-option>               </vue-select>             </vue-form-item>             <vue-form-item :label="$t(\'vue.table.conditions\')">               <vue-input icon="vue-icon-search" v-model="filterForm.conditions" :on-icon-click="filterColumn"                 @keydown.enter.native="filterColumn" ref="filterInput">                 <vue-select slot="prepend" v-model="filterForm.operations" style="width:80px;font-size:21px;"                   @change="operationsChange">                   <vue-option v-for="(item, index) in operations" :key="index" :label="item" :value="item"></vue-option>                 </vue-select>               </vue-input>             </vue-form-item>           </vue-form>           <vue-divider></vue-divider>           <vue-form label-width="100px">             <vue-form-item :label="$t(\'vue.table.filterBy\')">             <template v-for="(column, column_index) in labelColumns" >               <vue-tag hit style="margin:5px 5px 0 0;" v-for="(filter, index) in column.complexFilters" :key="column_index+\'__\'+index" closable                 type="info" @close="removeFilterColumn(column, filter)">{{column.label?column.label:(column.type=="index"?"#":"&nbsp;")}} {{filter.operations}} {{filter.conditions}}</vue-tag>             </template>             </vue-form-item>           </vue-form>         </vue-tab-pane>         <vue-tab-pane :label="$t(\'vue.table.display\')">           <vue-list scrollbar :height="150" :default-selected="false">             <vue-list-item v-for="(column, index) in labelColumns" :key="index" @select="displayColumn(column)"               style="cursor:pointer;">               <vue-button type="text" style="padding-left:15px">{{column.label?column.label:(column.type=="index"?"#":"&nbsp;")}}</vue-button>               <div style="float:right;">               <vue-button style="padding:10px 0 0 0;" :style="{visibility: index==0?\'hidden\': \'visible\'}"               icon="vue-icon-caret-top" type="text" @click.stop="reorderColumn(index, \'up\')"></vue-button>             <vue-button style="padding:10px 15px 0 0;" :style="{visibility: index==labelColumns.length-1?\'hidden\': \'visible\'}"                icon="vue-icon-caret-bottom" type="text" @click.stop="reorderColumn(index, \'down\')"></vue-button>                 <vue-button style="padding:10px 15px 0 0;" :style="{color: column.visible ? \'#13ce66\' : \'#a94442\'}"                   :icon="column.visible ? \'vue-icon-success\' : \'vue-icon-error\'" type="text"></vue-button>               </div>               <vue-divider v-if="index!==labelColumns.length-1"></vue-divider>             </vue-list-item>           </vue-list>         </vue-tab-pane>         <vue-tab-pane :label="$t(\'vue.table.exportData\')">           <vue-form label-width="100px">             <vue-form-item :label="$t(\'vue.table.fileName\')">               <vue-input v-model="fileName"></vue-input>             </vue-form-item>           </vue-form>           <div style="text-align:right">             <vue-button @click="exportData(true)" plain type="info" icon="vue-icon-download2">{{$t(\'vue.table.exportOrgData\')}}</vue-button>             <vue-button @click="exportData(false)" type="primary"               icon="vue-icon-download2">{{$t(\'vue.table.exportHandleData\')}}</vue-button>           </div>         </vue-tab-pane>       </vue-tabs>     </vue-dialog>',data:function(){return{tableColumns:[],pinForm:{leftPin:[],rightPin:[]},filterForm:{filterColumn:null,conditions:null,operations:"="},operations:["=","<",">","<=",">=","<>","%"],sortList:[],filterList:[],dialogVisible:!1,fileName:""}},props:{visible:Boolean},model:{prop:"visible"},watch:{visible:function(e){this.dialogVisible=e}},computed:{size:function(){return"Mobile"===v.getSystemInfo().device?"full":"small"},store:function(){return this.$parent.store},labelColumns:function(){return this.$parent.store.states.labelColumns}},methods:{closeHandle:function(){this.$parent.showContextMenu=!1},operationsChange:function(){this.$nextTick(this.$refs.filterInput.focus)},exportData:function(e){var t={};t.fileName=this.fileName,t.original=e,this.$parent.exportCsv(t)},noPin:function(e){this.removePin(e.value)},removePin:function(e){e.fixed=!1,this.$parent.doLayout()},leftPin:function(e,t,o){var i=v.difference(o,e);if(i.length&&this.removePin(i[0]),e.length<=0){var l=!1;return v.loop(this.tableColumns,function(e){!0!==e.fixed&&"left"!==e.fixed||(e.fixed=!1,l=!0)}),void(l&&this.$parent.doLayout())}var r=this;v.loop(e,function(e,t){var o=r.pinForm.rightPin.indexOf(e);-1!==o&&r.pinForm.rightPin.splice(o,1),e.fixed="left",e.fixedIndex=t,v.loop(e.colColumns,function(e){e.fixed="left",e.fixedIndex=t})}),this.$parent.doLayout()},rightPin:function(e,t,o){var i=v.difference(o,e);if(i.length&&this.removePin(i[0]),e.length<=0){var l=!1;return v.loop(this.tableColumns,function(e){"right"===e.fixed&&(e.fixed=!1,l=!0)}),void(l&&this.$parent.doLayout())}var r=this;v.loop(e,function(e,t){var o=r.pinForm.leftPin.indexOf(e);-1!==o&&r.pinForm.leftPin.splice(o,1),e.fixed="right",e.fixedIndex=t,v.loop(e.colColumns,function(e){e.fixed="right",e.fixedIndex=t})}),this.$parent.doLayout()},sortColumn:function(e,t){e.sortable=!0,e.order=t?"descending":"ascending",-1===this.store.states.sortingColumns.indexOf(e)&&this.store.states.sortingColumns.push(e),this.doSort()},removeSortColumn:function(e,t){t&&(e.sortable=!1);var o=this.sortList.indexOf(e);-1!==o&&(e.order="",this.sortList.splice(o,1),this.doSort())},doSort:function(){this.store.commit("changeSortCondition")},filterColumn:function(){var t=this,e=this.filterForm.filterColumn;if(v.isDef(e)){e.complexFilters||(e.complexFilters=[]);var o=e.complexFilters;v.arrayFind(o,function(e){return e.operations==t.filterForm.operations&&e.conditions==t.filterForm.conditions})||o.push({conditions:this.filterForm.conditions,operations:this.filterForm.operations}),this.doFilter(e)}},removeFilterColumn:function(e,t){var o=this.store;if(t){var i=e.complexFilters.indexOf(t);-1<i&&e.complexFilters.splice(i,1)}else e.complexFilters=[];o.commit("filterChange",{column:e,values:{complexFilters:e.complexFilters}}),this.$forceUpdate()},doFilter:function(e){this.store.commit("filterChange",{column:e,values:{complexFilters:e.complexFilters}}),this.doSort(),this.$forceUpdate()},displayColumn:function(e){e.visible=!e.visible,v.loop(e.colColumns,function(e){e.visible=!e.visible}),this.$parent.doLayout()},reorderColumn:function(e,t){var o="up"===t?e-1:e+1;this.store.commit("reorderColumn",e,o)}},mounted:function(){if(this.store){var t=this.tableColumns;v.loop(this.store.states._columns,function(e){"selectionColumn"!==e.property&&"indexColumn"!==e.property&&"expandColumn"!==e.property&&t.push(e)}),this.pinForm.leftPin=this.store.states.fixedColumns,this.pinForm.rightPin=this.store.states.rightFixedColumns,this.sortList=this.store.states.sortingColumns}}},a={template:'<div :class="[\'vue-table\', {\'vue-table--fit\': fit, \'vue-table--striped\': stripe, \'vue-table--border\': border}]" @mouseleave="handleMouseLeave($event)" :style="{width: layout.bodyWidth <= 0 ? \'0px\' : \'\'}"><div class="hidden-columns" ref="hiddenColumns"><slot></slot></div><div class="vue-table__main"><div class="vue-table__header-wrapper" ref="headerWrapper" v-show="showHeader"><table-header ref="tableHeader" :style="{width: layout.bodyWidth ? layout.bodyWidth + \'px\' : \'\'}"></table-header></div><div class="vue-table__body-wrapper" ref="bodyWrapper" tabindex="0" :style="[bodyHeight]"><table-body ref="tableBody" :style="{width: bodyWidth}"></table-body><div :style="{width: bodyWidth}" class="vue-table__empty-block" v-show="!data || data.length === 0"><span class="vue-table__empty-text"><slot name="empty">{{emptyText || emptyLabel}}</slot></span></div></div><div class="vue-table__footer-wrapper" ref="footerWrapper" v-show="showFooter"><table-footer ref="tableFooter" :style="{width: layout.bodyWidth ? layout.bodyWidth + \'px\' : \'\'}"></table-footer></div></div><div class="vue-table__fixed" v-show="leftFixedCount > 0" :style="[{width: layout.fixedWidth ? layout.fixedWidth + \'px\' : \'\'}, fixedHeight]"><div class="vue-table__fixed-header-wrapper" ref="fixedHeaderWrapper" v-show="showHeader"><table-header fixed="left" :style="{width: layout.fixedWidth ? layout.fixedWidth + \'px\' : \'\'}"></table-header></div><div class="vue-table__fixed-body-wrapper" ref="fixedBodyWrapper" :style="[{top: layout.headerHeight + \'px\'}, fixedBodyHeight]"><table-body ref="fixedTableBody" fixed="left" :style="{width: layout.fixedWidth ? layout.fixedWidth + \'px\' : \'\'}"></table-body></div><div class="vue-table__fixed-footer-wrapper" ref="fixedFooterWrapper" v-show="showFooter"><table-footer fixed="left" :style="{width: layout.fixedWidth ? layout.fixedWidth + \'px\' : \'\'}"></table-footer></div></div><div class="vue-table__fixed-right" v-show="rightFixedCount > 0" :style="[{width: layout.rightFixedWidth ? layout.rightFixedWidth + \'px\' : \'\'}, {right: layout.scrollY ? (border ? layout.gutterWidth : (layout.gutterWidth || 1)) + \'px\' : \'\'}, fixedHeight]"><div class="vue-table__fixed-header-wrapper" ref="rightFixedHeaderWrapper" v-show="showHeader"><table-header fixed="right" :style="{width: layout.rightFixedWidth ? layout.rightFixedWidth + \'px\' : \'\'}"></table-header></div><div class="vue-table__fixed-body-wrapper" ref="rightFixedBodyWrapper" :style="[{top: layout.headerHeight + \'px\'}, fixedBodyHeight]"><table-body ref="rightFixedTableBody" fixed="right" :style="{width: layout.rightFixedWidth ? layout.rightFixedWidth + \'px\' : \'\'}"></table-body></div><div class="vue-table__fixed-footer-wrapper" ref="rightFixedFooterWrapper" v-show="showFooter"><table-footer fixed="right" :style="{width: layout.rightFixedWidth ? layout.rightFixedWidth + \'px\' : \'\'}"></table-footer></div></div><div class="vue-table__fixed-right-patch" v-show="rightFixedCount > 0" :style="{width: layout.scrollY ? layout.gutterWidth + \'px\' : \'0\', height: layout.headerHeight + \'px\'}"></div><div class="vue-table__column-resize-proxy" ref="resizeProxy" v-show="resizeProxyVisible"></div><table-context-menu ref="contextMenu" v-if="contextMenu" v-model="showContextMenu""></table-context-menu></div>',name:"VueTable",props:{data:{type:Array,default:function(){return[]}},lazyload:Boolean,height:[String,Number],fit:{type:Boolean,default:!0},stripe:Boolean,border:Boolean,context:{},showHeader:{type:Boolean,default:!0},showFooter:Boolean,contextMenu:Boolean,rowClassName:[String,Function],rowStyle:[Object,Function],highlightCurrentRow:Boolean,highlightFirstAfterFilter:Boolean,highlightFirstAfterSort:Boolean,highlightHoverRow:{type:Boolean,default:!0},emptyText:String,defaultExpandAll:Boolean,defaultSort:{type:Array,default:function(){return[]}},tooltipEffect:{type:String,default:"light"},expandClassName:[String,Function]},components:{TableHeader:l,TableBody:i,TableFooter:n,TableContextMenu:s},activated:function(){var e=this.$refs,t=this.bodyScroll.top;e.bodyWrapper.scrollTop=t,e.fixedBodyWrapper.scrollTop=t,e.rightFixedBodyWrapper.scrollTop=t},methods:{clearFilters:function(){var e=this.$refs.tableHeader.filterPanels;for(var t in e)e[t].handleReset()},clearSorts:function(){var e=this;e.store.states.sortingColumns=[],e.$refs.contextMenu&&(e.$refs.contextMenu.sortList=[]),v.loop(e.store.states.columns,function(e){e.order=null}),e.store.commit("changeSortCondition")},exportCsv:function(e){v.isObject(e)||(e={}),e.fileName?-1===e.fileName.indexOf(".csv")&&(e.fileName+=".csv"):e.fileName="table.csv",v.isDef(e.original)||(e.original=!0);var t=e.original?this.store.states._columns:this.store.states.columns;t=v.filter(t,function(e){return"selectionColumn"!==e.property&&"indexColumn"!==e.property&&"expandColumn"!==e.property});var o=e.original?this.store.states._data:this.store.states.data,i=[];this.showFooter&&(i=v.map(v.filter(this.store.states.aggregates,function(e){return"selectionColumn"!==e.property&&"indexColumn"!==e.property&&"expandColumn"!==e.property}),function(e){return e.label}));function s(e,t,o){var i=o.separator,l=v.map(t,function(e){return'"'+v.toString(e).replace(/"/g,'""')+'"'});e.push(l.join(i))}var l=function(e,t,o,i){var l;i=v.merge({},{separator:","},i);var r=[],n=[];return e?(l=v.map(e,function(e){return v.isString(e)?e:(n.push(v.isDef(e.printLabel)?e.printLabel:v.isDef(e.label)?e.label:e.property),e.property)}),0<n.length&&s(r,n,i)):(l=[],v.loop(t,function(e){v.isArray(e)||v.mergeArray(l,Object.keys(e))}),0<l.length&&(l=v.filter(l,function(e,t,o){return o.indexOf(e)===t}),s(r,l,i))),v.loop(t,function(t){v.isArray(t)||(t=v.map(l,function(e){return v.isDef(t[e])?t[e]:""})),s(r,t,i)}),v.isArray(o)&&s(r,o,i),r.join("\r\n")}(t,o,i,e);!function(e,t){if(navigator.msSaveBlob){var o=new Blob(["\ufeff"+t],{type:"text/csv"});navigator.msSaveBlob(o,e)}else try{var i=document.createElement("a");i.download=e,i.href=function(e){if(Blob&&URL&&URL.createObjectURL){var t=new Blob(["\ufeff"+e],{type:"text/csv"});return URL.createObjectURL(t)}return"data:attachment/csv;charset=utf-8,\ufeff"+encodeURIComponent(e)}(t),document.body.appendChild(i),i.click(),document.body.removeChild(i)}catch(e){throw u.notify.warning({message:u.t("vue.screenfull.canot")}),e}}(e.fileName,l)},columnFilter:function(t,e){var o=null;v.isString(t)?v.loop(this.store.states._columns,function(e){v.isDef(o)||e.property===t&&(o=e)}):o=t,this.store.commit("filterChange",{column:o,values:e})},multipleColumnSort:function(e){this.store.states.sortingColumns=e||[],this.store.commit("changeSortCondition")},toggleContextMenu:function(){this.contextMenu&&(this.showContextMenu=!this.showContextMenu)},getUserSetting:function(o){var i={columns:[],columnsOrder:[]};return this.store&&v.loop(this.store.states._columns,function(e){i.columnsOrder.push(e.columnId);var t={id:e.columnId,property:e.property};(!o||-1<o.indexOf("order"))&&(t.order=e.order),(!o||-1<o.indexOf("fixed"))&&(t.fixed=e.fixed),(!o||-1<o.indexOf("visible"))&&(t.visible=e.visible),(!o||-1<o.indexOf("filter"))&&(t.filter={complexFilters:e.complexFilters,simpleFilters:e.filteredValue}),i.columns.push(t)}),i},setUserSetting:function(e){if(e){var i=this;if(e.columnsOrder&&e.columnsOrder.forEach(function(t,e){var o=v.arrayFindIndex(i.store.states._columns,function(e){return e.columnId==t});i.store.commit("reorderColumn",o,e)}),e.columns){var o=this.store.states._columns;i.clearSorts(),i.$refs.contextMenu.pinForm={leftPin:[],rightPin:[]},e.columns.forEach(function(t){var e=v.arrayFind(o,function(e){return e.columnId==t.id&&e.property==t.property});e.fixed=!1,e.visible=!0,i.store.commit("filterChange",{column:e,values:{},silent:!0}),"left"==t.fixed&&i.$refs.contextMenu.pinForm.leftPin.push(e),"right"==t.fixed&&i.$refs.contextMenu.pinForm.rightPin.push(e),t.order&&i.$refs.contextMenu.sortColumn(e,"descending"==t.order),(t.filter.complexFilters&&0<t.filter.complexFilters.length||t.filter.simpleFilters&&0<t.filter.simpleFilters.length)&&(e.complexFilters=t.filter.complexFilters||[],e.filteredValue=t.filter.simpleFilters||[],i.store.commit("filterChange",{column:e,values:t.filter})),!1===t.visible&&i.$refs.contextMenu.displayColumn(e)}),i.$refs.contextMenu.filterForm={filterColumn:null,conditions:null,operations:"="},i.doLayout()}}},setCurrentRow:function(e,t){if(this.store.commit("setCurrentRow",e),t){var o=this.$refs.tableBody.$refs["trow"+e.$index],i=this.$refs.bodyWrapper.offsetHeight,l=this.$refs.bodyWrapper.scrollTop,r=o.offsetTop+this.$refs.tableBody.delta.marginTop,n=r-(i-o.offsetHeight);r<l&&(this.$refs.bodyWrapper.scrollTop=r),l<n&&(this.$refs.bodyWrapper.scrollTop=n)}},getCurrentRow:function(){return this.store.states.currentRow},getSelection:function(){return this.store.states.selection},toggleRowSelection:function(e,t){this.store.toggleRowSelection(e,t)&&this.$emit("selection-change",this.store.states.selection),this.store.updateAllSelected()},clearSelection:function(){this.store.clearSelection()},handleMouseLeave:function(){this.store.commit("setHoverRow",null),this.hoverState&&(this.hoverState=null)},updateScrollY:function(){this.layout.updateScrollY();var e=this.$refs;e.fixedBodyWrapper&&(e.fixedBodyWrapper.scrollTop=this.bodyScroll.top),e.rightFixedBodyWrapper&&(e.rightFixedBodyWrapper.scrollTop=this.bodyScroll.top)},isCellHidden:function(e,t){return"left"===t?e>=this.leftFixedCount:"right"===t?e<this.store.states.columns.length-this.rightFixedCount:e<this.leftFixedCount||e>=this.store.states.columns.length-this.rightFixedCount},bodyScrollFn:function(e){var t=this.$refs,o=t.bodyWrapper.scrollLeft,i=t.bodyWrapper.scrollTop;this.bodyScroll.left!==o&&(this.bodyScroll.left=o,t.headerWrapper.scrollLeft=o,0===(t.footerWrapper.scrollLeft=o)&&this.$emit("scroll-left"),o===t.bodyWrapper.scrollWidth-t.bodyWrapper.clientWidth&&this.$emit("scroll-right")),this.bodyScroll.top!==i&&(t.tableBody.updateZone(i),this.bodyScroll.top=i,t.fixedBodyWrapper.scrollTop=i,0===(t.rightFixedBodyWrapper.scrollTop=i)&&this.$emit("scroll-top"),i===t.bodyWrapper.scrollHeight-t.bodyWrapper.clientHeight&&this.$emit("scroll-bottom"))},scrollYMouseWheel:function(e){var t=this.$refs;if(this.layout.scrollY){e.preventDefault();var o=e.wheelDelta||-e.detail,i=this.bodyScroll.top,l=40;v.isElement(t.tableBody.$refs.tbody)&&(l=t.tableBody.$refs.tbody.firstElementChild.offsetHeight),l*=3,o<0?i+=l:i-=l;var r=t.bodyWrapper.scrollHeight-t.bodyWrapper.clientHeight;i<0&&(i=0),r<i&&(i=r),t.bodyWrapper.scrollTop=i,t.fixedBodyWrapper.scrollTop=i,t.rightFixedBodyWrapper.scrollTop=i}},scrollXMouseWheel:function(e){var t=this.$refs;if(this.layout.scrollX){e.preventDefault();var o=e.wheelDelta||-e.detail,i=this.bodyScroll.left;o<0?i+=80:i-=80;var l=t.bodyWrapper.scrollWidth-t.bodyWrapper.clientWidth;i<0&&(i=0),l<i&&(i=l),t.bodyWrapper.scrollLeft=i,t.headerWrapper.scrollLeft=i,t.footerWrapper.scrollLeft=i}},bodyKeydownFn:function(e){if(38==e.keyCode||40==e.keyCode){e.preventDefault();var t=this.store.states.data.indexOf(this.store.states.currentRow);38==e.keyCode&&t--,40==e.keyCode&&t++;var o=this.store.states.data[t];o&&this.setCurrentRow(o,!0)}},bindEvents:function(){var e=this.$refs,t=v.isFirefox?"DOMMouseScroll":"mousewheel";v.on(e.bodyWrapper,"keydown",this.bodyKeydownFn),v.on(e.bodyWrapper,"scroll",this.bodyScrollFn),v.on(e.bodyWrapper,t,this.scrollYMouseWheel),v.on(e.fixedBodyWrapper,t,this.scrollYMouseWheel),v.on(e.rightFixedBodyWrapper,t,this.scrollYMouseWheel),v.on(e.headerWrapper,t,this.scrollXMouseWheel),v.on(e.fixedHeaderWrapper,t,this.scrollXMouseWheel),v.on(e.rightFixedHeaderWrapper,t,this.scrollXMouseWheel),v.on(e.footerWrapper,t,this.scrollXMouseWheel),v.on(e.fixedFooterWrapper,t,this.scrollXMouseWheel),v.on(e.rightFixedFooterWrapper,t,this.scrollXMouseWheel),this.fit&&v.addResizeListener(this.$el,this.doLayout)},unBindEvents:function(){var e=this.$refs,t=v.isFirefox?"DOMMouseScroll":"mousewheel";v.off(e.bodyWrapper,"scroll",this.bodyScrollFn),v.off(e.bodyWrapper,t,this.scrollYMouseWheel),v.off(e.fixedBodyWrapper,t,this.scrollYMouseWheel),v.off(e.rightFixedBodyWrapper,t,this.scrollYMouseWheel),v.off(e.headerWrapper,t,this.scrollXMouseWheel),v.off(e.fixedHeaderWrapper,t,this.scrollXMouseWheel),v.off(e.rightFixedHeaderWrapper,t,this.scrollXMouseWheel),v.off(e.footerWrapper,t,this.scrollXMouseWheel),v.off(e.fixedFooterWrapper,t,this.scrollXMouseWheel),v.off(e.rightFixedFooterWrapper,t,this.scrollXMouseWheel),this.fit&&v.removeResizeListener(this.$el,this.doLayout)},resizeZone:function(){var e=this.$refs;e.tableBody&&e.tableBody.updateZone(this.bodyScroll.top),this.showFooter&&(this.store.getAggregate(this.store.states.columns,this.store.states.data),e.tableFooter.aggregates=this.store.states.aggregates)},doLayout:function(){var e=this;e.store.updateColumns(),e.$nextTick(function(){e.layout.update(),e.layout.updateHeight(),e.updateScrollY(),e.resizeZone()})}},created:function(){this.tableId="vue-table_",this.columnId=1},computed:{emptyLabel:function(){return this.$t("vue.table.emptyText")},leftFixedCount:function(){return this.store.states.fixedColumns.length},rightFixedCount:function(){return this.store.states.rightFixedColumns.length},bodyHeight:function(){return{height:this.layout.bodyHeight?this.layout.bodyHeight+"px":""}},bodyWidth:function(){var e=this.layout;return e.bodyWidth?e.bodyWidth-(e.scrollY?e.gutterWidth:0)+"px":""},fixedBodyHeight:function(){var e={},t=this.layout;return this.height&&(e={height:t.fixedBodyHeight?t.fixedBodyHeight+"px":""}),e},fixedHeight:function(){var e=this.layout;return{height:e.viewportHeight?e.viewportHeight+"px":""}}},watch:{height:function(e){this.layout.setHeight(e)},data:{immediate:!0,handler:function(e){var t=this.store;t.commit("setData",e),v.loop(t.states.columns,function(e){(e.filteredValue&&e.filteredValue.length||e.complexFilters&&e.complexFilters.length)&&t.commit("filterChange",{column:e,values:{complexFilters:e.complexFilters,simpleFilters:e.filteredValue},silent:!0})}),0<t.states.sortingColumns.length&&(t.states.dataChangedSorting=!0,this.$nextTick(function(){t.commit("changeSortCondition")}))}},showHeader:function(){this.doLayout()},showFooter:function(){this.doLayout()},lazyload:function(e){if(this.height){var t=this.$refs.tableBody.delta;t.keeps=e?1*this.height:0,this.doLayout()}}},beforeDestroy:function(){this.unBindEvents()},mounted:function(){this.layout.setHeight(this.height),this.bindEvents(),this.doLayout(),this.contextMenu&&this.$el.parentNode.appendChild(this.$refs.contextMenu.$el)},data:function(){var e=new t(this,{defaultExpandAll:this.defaultExpandAll});return{store:e,layout:new o({store:e,table:this,fit:this.fit,showHeader:self.showHeader}),renderExpanded:null,resizeProxyVisible:!1,showContextMenu:!1,bodyScroll:{left:0,top:0}}}};u.component(a.name,a)});